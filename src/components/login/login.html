<div class="account-pages pt-4">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-md-8 col-lg-4">
                <div class="text-center">
                    <a href="/">
                        <img alt="" height="76" src="@/static/images/logo-dark.svg" />
                    </a>
                </div>
                <div class="card overflow-hidden mt-4">
                    <div class="card-body pt-0 mt-8">
                        <h5 class="text-center text-primary mb-4" v-if="!errorMsg">用户登录</h5>
                        <p class="text-center text-danger mb-2" v-if="errorMsg">{{ errorMsg }}</p>
                        <div class="p-2">
                            <form class="form-horizontal needs-validation" @submit.stop.prevent="submit">
                                <div class="form-group">
                                    <label for="name">手机号或邮箱</label>
                                    <input
                                        ref="autofocus"
                                        name="name"
                                        class="form-control"
                                        v-model="login.name"
                                        :class="{'is-invalid':
                                                    (submitted && $v.login.name.$error) ||
                                                    submitted &&
                                                    !isPhone(this.login.name) &&
                                                    !isEmail(this.login.name)
                                        }"
                                    />
                                </div>
                                <div class="form-group">
                                    <label for="password">密码</label>
                                    <input
                                        type="password"
                                        placeholder=""
                                        class="form-control"
                                        autocomplete="off"
                                        v-model="login.password"
                                        minlength="6"
                                        maxlength="20"
                                        :class="{ 'is-invalid': submitted && $v.login.password.$error }"
                                    />
                                </div>
                                <div class="form-group position-relative">
                                    <label>图片验证码</label>
                                    <input
                                        style="width: 60%;"
                                        type="text"
                                        placeholder=""
                                        class="form-control"
                                        autocomplete="off"
                                        v-model="login.captcha"
                                        minlength="4"
                                        maxlength="4"
                                        :class="{ 'is-invalid': submitted && $v.login.captcha.$error }"
                                    />
                                    <img
                                        class="auth-captcha"
                                        @click="getCaptcha"
                                        :src="captcha"
                                        v-if="!captchaLoading"
                                    />
                                </div>
                                <div class="mt-6">
                                    <button type="submit" class="btn btn-primary btn-block" :disabled="loading">立即登录</button>
                                </div>
                                <div class="mt-6">
                                    <span>
                                        <router-link :to="{name: 'password_reset', query: $route.query}">
                                            <a><i class="mdi mdi-lock mr-1"></i> 忘记密码? </a>
                                        </router-link>
                                    </span>
                                    <span class="float-right">
                                        还没有账号
                                        <router-link :to="{name: 'register', query: $route.query}">
                                            <a class="font-weight-medium text-primary">立即注册</a>
                                        </router-link>
                                    </span>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
                <div class="mt-11 text-center">
                    <p> © 2021 OpenAtom. </p>
                </div>
            </div>
        </div>
    </div>
</div>
